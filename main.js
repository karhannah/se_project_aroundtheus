!function(){"use strict";class e{constructor(e,t,s){let{name:n,link:o}=e;this.name=n,this.link=o,this._cardSelector=t,this._handleImageClick=s}getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick(this)}))}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button_is-active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=this.getTemplate(),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._cardTitleElement=this._cardElement.querySelector(".card__title"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._cardImageElement.src=this.link,this._cardTitleElement.textContent=this.name,this._cardImageElement.alt=this.name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._settings=e,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._buttonElement=this._formElement.querySelector(this._settings.submitButtonSelector)}showInputError(e,t){const s=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._settings.inputErrorClass),s.textContent=t,s.classList.add(this._settings.errorClass)}hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass),t.textContent=""}resetValidation(){this.toggleButtonState(),this._inputList.forEach((e=>{this.hideInputError(e)}))}checkInputValidity(e){e.validity.valid?this.hideInputError(e):this.showInputError(e,e.validationMessage)}toggleButtonState(){this.hasInvalidInput()?(this._buttonElement.classList.add(this._settings.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._settings.inactiveButtonClass),this._buttonElement.disabled=!1)}hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_setEventListeners(){this.toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this.checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._setEventListeners()}}class s{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._handleModalClose=this._handleModalClose.bind(this),this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>this.close()))}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("mousedown",this._handleModalClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("mousedown",this._handleModalClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleModalClose(e){e.target===e.currentTarget&&this.close()}setEventListeners(){}}class n extends s{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super(t),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleForm=s,this.setEventListeners()}close(){super.close()}setEventListeners(){console.log(this._handleForm),this._popupForm.addEventListener("submit",this._handleForm)}getInputs(){const e=this._popupForm.getElementsByClassName("modal__input");let t=[];return Array.from(e).forEach((e=>{t.push(e.value)})),t}}const o={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},r=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t),this.renderItems()}renderItems(){this._items.forEach((e=>{this.addItem(e)}))}addItem(e){const t=this._renderer(e);this._container.prepend(t)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:function(t){return new e(t,"#card-template",y).getView()}},".gallery__cards"),i=(document.querySelector("#card-template").content.querySelector(".card"),new class{constructor(e){let{name:t,job:s}=e;this._name=t,this._job=s}getUserInfo(){return{name:this._name,job:this._job}}setUserInfo(e){let{name:t,job:s}=e;this._name=t,document.querySelector("#profile__title").textContent=this._name,this._job=s,document.querySelector("#profile__description").textContent=this._job}}("Jacques Cousteau","Explorer")),a=(document.querySelector(".gallery__cards"),document.querySelector("#profile__add-button")),l=document.querySelector("#profile__title"),c=document.querySelector("#profile__description"),d=document.querySelector("#modal__title"),u=document.querySelector("#modal__description"),m=document.querySelector("#profile__edit-button"),h=document.querySelector("#profile-form"),_=document.querySelector("#add-form"),p=new n({popupSelector:"#profileEditModal",handleFormSubmit:function(e){e.preventDefault();let t=p.getInputs();i.setUserInfo({name:t[0],job:t[1]}),p.close()}}),E=new n({popupSelector:"#cardModal",handleFormSubmit:function(e){e.preventDefault();let t=E.getInputs();var s;s={name:t[0],link:t[1]},r.addItem(s),e.target.reset(),v.resetValidation(),E.close()}}),g=new class extends s{constructor(e){super(e)}open(e,t){this._popupElement.querySelector(".modal__image").src=e,this._popupElement.querySelector(".modal__image").alt=e,this._popupElement.querySelector(".modal__caption").textContent=t,super.open()}}("#previewImageModal"),v=new t(o,_),S=new t(o,h);function y(e){g.open(e.link,e.name)}v.enableValidation(),S.enableValidation(),m.addEventListener("click",(()=>{d.value=l.textContent,u.value=c.textContent.trim(),p.open(),S.resetValidation()})),a.addEventListener("click",(()=>E.open()))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dkN1RixFQUF3QnpCLE1BQVF1QixFQUFtQnJGLFlBQVlzRyxPQUMvRFgsRUFBaUJqRCxPQUNqQjBELEVBQXFCN0UsaUJBQWlCLElBR3hDNEQsRUFBaUIvRixpQkFBaUIsU0FBUyxJQUFNMEcsRUFBYXBELFEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluayB9LCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLmxpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBnZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUljb24oKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9pcy1hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGVFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5uYW1lO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIGhpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLnNob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuaGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgICAgIHRoaXMuX2hhbmRsZU1vZGFsQ2xvc2UgPSB0aGlzLl9oYW5kbGVNb2RhbENsb3NlLmJpbmQodGhpcyk7XG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVNb2RhbENsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVNb2RhbENsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldmVudCkge1xuICAgICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVNb2RhbENsb3NlKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHtwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0fSkge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm0gPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgICAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMgKCkge1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLl9oYW5kbGVGb3JtKTtcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlRm9ybSk7XG4gICAgfVxuXG4gICAgZ2V0SW5wdXRzKCkge1xuICAgICAgY29uc3QgaW5wdXRzID0gdGhpcy5fcG9wdXBGb3JtLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtb2RhbF9faW5wdXRcIik7XG4gICAgICBsZXQgdmFscyA9IFtdO1xuICAgICAgQXJyYXkuZnJvbShpbnB1dHMpLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgICAgIHZhbHMucHVzaChpbnB1dC52YWx1ZSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB2YWxzO1xuICB9XG59XG4iLCIvLyBJbml0aWFsIGNhcmRzIGRhdGFcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gICAge1xuICAgICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgICB9LFxuICBdO1xuXG4gIC8vIEVsZW1lbnRzXG5cblxuICAvLyBGb3JtIHNldHRpbmdzXG4gIGV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICAgIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICAgIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbiAgfTsiLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCAqIGFzIGNvbnN0YW50cyBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbiAoe2l0ZW1zOmNvbnN0YW50cy5pbml0aWFsQ2FyZHMsIHJlbmRlcmVyOiBhZGRDYXJkfSwgXCIuZ2FsbGVyeV9fY2FyZHNcIik7XG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudFxuICAgIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIilcbiAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIik7XG4gIGNvbnN0IHByb2ZpbGVJbmZvID0gbmV3IFVzZXJJbmZvKFwiSmFjcXVlcyBDb3VzdGVhdVwiLCBcIkV4cGxvcmVyXCIpO1xuICBjb25zdCBjYXJkTGlzdEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19jYXJkc1wiKTtcbiAgY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbiAgY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX190aXRsZVwiKTtcbiAgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbiAgY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsX190aXRsZVwiKTtcbiAgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsX19kZXNjcmlwdGlvblwiKTtcbiAgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuICBjb25zdCBwcm9maWxlTW9kYWxGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWZvcm1cIik7XG4gIGNvbnN0IGNhcmRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtZm9ybVwiKTtcbmNvbnN0IHByb2ZpbGVGb3JtTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybSh7cG9wdXBTZWxlY3RvcjpcIiNwcm9maWxlRWRpdE1vZGFsXCIsIGhhbmRsZUZvcm1TdWJtaXQ6aGFuZGxlUHJvZmlsZUVkaXRTdWJtaXR9KTtcbmNvbnN0IGNhcmRBZGRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtICh7cG9wdXBTZWxlY3RvcjpcIiNjYXJkTW9kYWxcIiwgaGFuZGxlRm9ybVN1Ym1pdDpoYW5kbGVBZGRDYXJkU3VibWl0fSk7XG5jb25zdCBwcmV2aWV3SW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwcmV2aWV3SW1hZ2VNb2RhbFwiKTtcbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uc3RhbnRzLnNldHRpbmdzLCBjYXJkRm9ybSk7XG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbnN0YW50cy5zZXR0aW5ncywgcHJvZmlsZU1vZGFsRm9ybSk7XG5cbi8vIEVuYWJsZSBmb3JtIHZhbGlkYXRpb25cblxuYWRkQ2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmZ1bmN0aW9uIGFkZENhcmQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmREYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2spO1xuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XG59XG5cbi8vIFJlbmRlciBjYXJkIGZ1bmN0aW9uIHVzaW5nIENhcmQgY2xhc3NcbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEsIGNhcmRMaXN0RWwpIHtcbiAgc2VjdGlvbi5hZGRJdGVtKGNhcmREYXRhKTtcbn1cblxuLy8gSW1hZ2UgY2xpY2sgaGFuZGxlclxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhjYXJkSW5zdGFuY2UpIHtcbiAgcHJldmlld0ltYWdlUG9wdXAub3BlbihjYXJkSW5zdGFuY2UubGluaywgY2FyZEluc3RhbmNlLm5hbWUpO1xufVxuXG4vL1xuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQoZSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGxldCBpbnB1dHMgPSBwcm9maWxlRm9ybU1vZGFsLmdldElucHV0cygpO1xuICBwcm9maWxlSW5mby5zZXRVc2VySW5mbyh7bmFtZTppbnB1dHNbMF0sIGpvYjppbnB1dHMgWzFdfSk7XG4gIHByb2ZpbGVGb3JtTW9kYWwuY2xvc2UoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgbGV0IGlucHV0cyA9IGNhcmRBZGRNb2RhbC5nZXRJbnB1dHMoKTtcbiAgcmVuZGVyQ2FyZCh7IG5hbWU6IGlucHV0c1swXSwgbGluazogaW5wdXRzWzFdIH0pO1xuICBlLnRhcmdldC5yZXNldCgpO1xuICBhZGRDYXJkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgY2FyZEFkZE1vZGFsLmNsb3NlKCk7XG59XG5cbi8vIEV2ZW50IExpc3RlbmVyc1xucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBwcm9maWxlVGl0bGUudGV4dENvbnRlbnQ7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50LnRyaW0oKTtcbiAgcHJvZmlsZUZvcm1Nb2RhbC5vcGVuKCk7XG4gIHByb2ZpbGVGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG5cbmFkZE5ld0NhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGNhcmRBZGRNb2RhbC5vcGVuKCkpO1xuXG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuXG5jb25zdHJ1Y3Rvcih7aXRlbXMsIHJlbmRlcmVyfSxjbGFzc1NlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NTZWxlY3Rvcik7XG4gICAgdGhpcy5yZW5kZXJJdGVtcygpO1xufVxuXG5yZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLmFkZEl0ZW0oaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGl0ZW0pIHtcbiAgICBjb25zdCBuZXdDYXJkID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQobmV3Q2FyZCk7XG4gIH1cbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3Ioe25hbWUsIGpvYn0pIHtcclxuICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLl9qb2IgPSBqb2I7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtuYW1lOnRoaXMuX25hbWUsIGpvYjp0aGlzLl9qb2J9O1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvKHtuYW1lLCBqb2J9KSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICAgICAgdGhpcy5fam9iID0gam9iO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fZGVzY3JpcHRpb25cIikudGV4dENvbnRlbnQgPSB0aGlzLl9qb2I7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBvcGVuKHNyYywgZGF0YSkge1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIikuc3JjID0gc3JjO1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIikuYWx0ID0gc3JjO1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKS50ZXh0Q29udGVudCA9IGRhdGE7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICB9XG59Il0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwibmFtZSIsImxpbmsiLCJ0aGlzIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2RlbGV0ZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX2NhcmRJbWFnZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJnZXRWaWV3IiwiX2NhcmRUaXRsZUVsZW1lbnQiLCJzcmMiLCJ0ZXh0Q29udGVudCIsImFsdCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX3NldHRpbmdzIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsInNob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaGlkZUlucHV0RXJyb3IiLCJyZXNldFZhbGlkYXRpb24iLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJjaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJoYXNJbnZhbGlkSW5wdXQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJzb21lIiwiZW5hYmxlVmFsaWRhdGlvbiIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX2hhbmRsZU1vZGFsQ2xvc2UiLCJjbG9zZSIsIm9wZW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJrZXkiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtIiwiY29uc29sZSIsImxvZyIsImdldElucHV0cyIsImlucHV0cyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJ2YWxzIiwiaW5wdXQiLCJwdXNoIiwidmFsdWUiLCJzZWN0aW9uIiwiY2xhc3NTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsIm5ld0NhcmQiLCJwcmVwZW5kIiwiY2FyZERhdGEiLCJwcm9maWxlSW5mbyIsImpvYiIsIl9uYW1lIiwiX2pvYiIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJfcmVmMiIsImFkZE5ld0NhcmRCdXR0b24iLCJwcm9maWxlVGl0bGUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlTW9kYWxGb3JtIiwiY2FyZEZvcm0iLCJwcm9maWxlRm9ybU1vZGFsIiwiZSIsInByZXZlbnREZWZhdWx0IiwiY2FyZEFkZE1vZGFsIiwicmVzZXQiLCJhZGRDYXJkRm9ybVZhbGlkYXRvciIsInByZXZpZXdJbWFnZVBvcHVwIiwiZGF0YSIsImNvbnN0YW50cyIsInByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiY2FyZEluc3RhbmNlIiwidHJpbSJdLCJzb3VyY2VSb290IjoiIn0=