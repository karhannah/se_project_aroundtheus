!function(){"use strict";class e{constructor(e,t,s){let{name:n,link:o}=e;this.name=n,this.link=o,this._cardSelector=t,this._handleImageClick=s}getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick(this)}))}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button_is-active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=this.getTemplate(),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._cardTitleElement=this._cardElement.querySelector(".card__title"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._cardImageElement.src=this.link,this._cardTitleElement.textContent=this.name,this._cardImageElement.alt=this.name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._settings=e,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._buttonElement=this._formElement.querySelector(this._settings.submitButtonSelector)}showInputError(e,t){const s=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._settings.inputErrorClass),s.textContent=t,s.classList.add(this._settings.errorClass)}hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass),t.textContent=""}resetValidation(){this.toggleButtonState(),this._inputList.forEach((e=>{this.hideInputError(e)}))}checkInputValidity(e){e.validity.valid?this.hideInputError(e):this.showInputError(e,e.validationMessage)}toggleButtonState(){this.hasInvalidInput()?(this._buttonElement.classList.add(this._settings.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._settings.inactiveButtonClass),this._buttonElement.disabled=!1)}hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_setEventListeners(){this.toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this.checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._setEventListeners()}}class s{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._handleModalClose=this._handleModalClose.bind(this),this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>this.close()))}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("mousedown",this._handleModalClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("mousedown",this._handleModalClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleModalClose(e){e.target===e.currentTarget&&this.close()}setEventListeners(){}}class n extends s{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super(t),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleForm=s,this.setEventListeners()}close(){super.close()}setEventListeners(){console.log(this._handleForm),this._popupForm.addEventListener("submit",this._handleForm)}getInputs(){const e=this._popupForm.getElementsByClassName("modal__input");let t=[];return Array.from(e).forEach((e=>{t.push(e.value)})),t}}const o={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},r=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t),this.renderItems()}renderItems(){this._items.forEach((e=>{this.addItem(e)}))}addItem(e){const t=this._renderer(e);this._container.prepend(t)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:y},".gallery__cards"),i=(document.querySelector("#card-template").content.querySelector(".card"),new class{constructor(e){let{name:t,job:s}=e;this._name=t,this._job=s}getUserInfo(){return{name:this._name,job:this._job}}setUserInfo(e){let{name:t,job:s}=e;this._name=t,document.querySelector("#profile__title").textContent=this._name,this._job=s,document.querySelector("#profile__description").textContent=this._job}}("Jacques Cousteau","Explorer")),l=(document.querySelector(".gallery__cards"),document.querySelector("#profile__add-button")),a=document.querySelector("#profile__title"),c=document.querySelector("#profile__description"),d=document.querySelector("#modal__title"),u=document.querySelector("#modal__description"),m=document.querySelector("#profile__edit-button"),h=document.querySelector("#profile-form"),_=document.querySelector("#add-form"),p=new n({popupSelector:"#profileEditModal",handleFormSubmit:function(e){e.preventDefault();let t=p.getInputs();i.setUserInfo({name:t[0],job:t[1]}),p.close()}}),E=new n({popupSelector:"#cardModal",handleFormSubmit:function(e){e.preventDefault();let t=E.getInputs();(function(e,t){const s=y(e);r.addItem(s)})({name:t[0],link:t[1]}),e.target.reset(),S.resetValidation(),E.close()}}),g=new class extends s{constructor(e){super(e)}open(e,t){this._popupElement.querySelector(".modal__image").src=e,this._popupElement.querySelector(".modal__image").alt=e,this._popupElement.querySelector(".modal__caption").textContent=t,super.open()}}("#previewImageModal"),S=new t(o,_),v=new t(o,h);function y(t){return new e(t,"#card-template",f).getView()}function f(e){g.open(e.link,e.name)}S.enableValidation(),v.enableValidation(),m.addEventListener("click",(()=>{d.value=a.textContent,u.value=c.textContent.trim(),p.open(),v.resetValidation()})),l.addEventListener("click",(()=>E.open()))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQWUsTUFBTUEsRUFDbkJDLFdBQUFBLENBQVdDLEVBQWlCQyxFQUFjQyxHQUFrQixJQUFoRCxLQUFFQyxFQUFJLEtBQUVDLEdBQU1KLEVBQ3hCSyxLQUFLRixLQUFPQSxFQUNaRSxLQUFLRCxLQUFPQSxFQUNaQyxLQUFLQyxjQUFnQkwsRUFDckJJLEtBQUtFLGtCQUFvQkwsQ0FDM0IsQ0FFQU0sV0FBQUEsR0FLRSxPQUpvQkMsU0FDakJDLGNBQWNMLEtBQUtDLGVBQ25CSyxRQUFRRCxjQUFjLFNBQ3RCRSxXQUFVLEVBRWYsQ0FFQUMsa0JBQUFBLEdBQ0VSLEtBQUtTLFlBQVlDLGlCQUFpQixTQUFTLEtBQ3pDVixLQUFLVyxpQkFBaUIsSUFFeEJYLEtBQUtZLGNBQWNGLGlCQUFpQixTQUFTLEtBQzNDVixLQUFLYSxtQkFBbUIsSUFFMUJiLEtBQUtjLGtCQUFrQkosaUJBQWlCLFNBQVMsS0FDL0NWLEtBQUtFLGtCQUFrQkYsS0FBSyxHQUVoQyxDQUVBVyxlQUFBQSxHQUNFWCxLQUFLUyxZQUFZTSxVQUFVQyxPQUFPLDhCQUNwQyxDQUVBSCxpQkFBQUEsR0FDRWIsS0FBS2lCLGFBQWFDLFNBQ2xCbEIsS0FBS2lCLGFBQWUsSUFDdEIsQ0FFQUUsT0FBQUEsR0FjRSxPQWJBbkIsS0FBS2lCLGFBQWVqQixLQUFLRyxjQUN6QkgsS0FBS2Msa0JBQW9CZCxLQUFLaUIsYUFBYVosY0FBYyxnQkFDekRMLEtBQUtvQixrQkFBb0JwQixLQUFLaUIsYUFBYVosY0FBYyxnQkFDekRMLEtBQUtZLGNBQWdCWixLQUFLaUIsYUFBYVosY0FDckMsd0JBRUZMLEtBQUtTLFlBQWNULEtBQUtpQixhQUFhWixjQUFjLHNCQUVuREwsS0FBS2Msa0JBQWtCTyxJQUFNckIsS0FBS0QsS0FDbENDLEtBQUtvQixrQkFBa0JFLFlBQWN0QixLQUFLRixLQUMxQ0UsS0FBS2Msa0JBQWtCUyxJQUFNdkIsS0FBS0YsS0FFbENFLEtBQUtRLHFCQUNFUixLQUFLaUIsWUFDZCxFQ3BEYSxNQUFNTyxFQUNuQjlCLFdBQUFBLENBQVkrQixFQUFVQyxHQUNwQjFCLEtBQUsyQixVQUFZRixFQUNqQnpCLEtBQUs0QixhQUFlRixFQUNwQjFCLEtBQUs2QixXQUFhQyxNQUFNQyxLQUN0Qi9CLEtBQUs0QixhQUFhSSxpQkFBaUJoQyxLQUFLMkIsVUFBVU0sZ0JBRXBEakMsS0FBS2tDLGVBQWlCbEMsS0FBSzRCLGFBQWF2QixjQUN0Q0wsS0FBSzJCLFVBQVVRLHFCQUVuQixDQUVBQyxjQUFBQSxDQUFlQyxFQUFjQyxHQUMzQixNQUFNQyxFQUFldkMsS0FBSzRCLGFBQWF2QixjQUNyQyxJQUFJZ0MsRUFBYUcsWUFFbkJILEVBQWF0QixVQUFVMEIsSUFBSXpDLEtBQUsyQixVQUFVZSxpQkFDMUNILEVBQWFqQixZQUFjZ0IsRUFDM0JDLEVBQWF4QixVQUFVMEIsSUFBSXpDLEtBQUsyQixVQUFVZ0IsV0FDNUMsQ0FFQUMsY0FBQUEsQ0FBZVAsR0FDYixNQUFNRSxFQUFldkMsS0FBSzRCLGFBQWF2QixjQUNyQyxJQUFJZ0MsRUFBYUcsWUFFbkJILEVBQWF0QixVQUFVRyxPQUFPbEIsS0FBSzJCLFVBQVVlLGlCQUM3Q0gsRUFBYXhCLFVBQVVHLE9BQU9sQixLQUFLMkIsVUFBVWdCLFlBQzdDSixFQUFhakIsWUFBYyxFQUM3QixDQUVBdUIsZUFBQUEsR0FDRTdDLEtBQUs4QyxvQkFDTDlDLEtBQUs2QixXQUFXa0IsU0FBU1YsSUFDdkJyQyxLQUFLNEMsZUFBZVAsRUFBYSxHQUVyQyxDQUVBVyxrQkFBQUEsQ0FBbUJYLEdBQ1pBLEVBQWFZLFNBQVNDLE1BR3pCbEQsS0FBSzRDLGVBQWVQLEdBRnBCckMsS0FBS29DLGVBQWVDLEVBQWNBLEVBQWFjLGtCQUluRCxDQUVBTCxpQkFBQUEsR0FDTTlDLEtBQUtvRCxtQkFDUHBELEtBQUtrQyxlQUFlbkIsVUFBVTBCLElBQUl6QyxLQUFLMkIsVUFBVTBCLHFCQUNqRHJELEtBQUtrQyxlQUFlb0IsVUFBVyxJQUUvQnRELEtBQUtrQyxlQUFlbkIsVUFBVUcsT0FBT2xCLEtBQUsyQixVQUFVMEIscUJBQ3BEckQsS0FBS2tDLGVBQWVvQixVQUFXLEVBRW5DLENBRUFGLGVBQUFBLEdBQ0UsT0FBT3BELEtBQUs2QixXQUFXMEIsTUFBTWxCLElBQ25CQSxFQUFhWSxTQUFTQyxPQUVsQyxDQUVBMUMsa0JBQUFBLEdBQ0VSLEtBQUs4QyxvQkFFTDlDLEtBQUs2QixXQUFXa0IsU0FBU1YsSUFDdkJBLEVBQWEzQixpQkFBaUIsU0FBUyxLQUNyQ1YsS0FBS2dELG1CQUFtQlgsR0FDeEJyQyxLQUFLOEMsbUJBQW1CLEdBQ3hCLEdBRU4sQ0FFQVUsZ0JBQUFBLEdBQ0V4RCxLQUFLUSxvQkFDUCxFQzFFYSxNQUFNaUQsRUFDbkIvRCxXQUFBQSxDQUFZZ0UsR0FDUjFELEtBQUsyRCxjQUFnQnZELFNBQVNDLGNBQWNxRCxHQUM1QzFELEtBQUs0RCxnQkFBa0I1RCxLQUFLNEQsZ0JBQWdCQyxLQUFLN0QsTUFDakRBLEtBQUs4RCxrQkFBb0I5RCxLQUFLOEQsa0JBQWtCRCxLQUFLN0QsTUFDckRBLEtBQUsyRCxjQUFjdEQsY0FBYyxpQkFBaUJLLGlCQUFpQixTQUFTLElBQU1WLEtBQUsrRCxTQUMzRixDQUVBQyxJQUFBQSxHQUNJaEUsS0FBSzJELGNBQWM1QyxVQUFVMEIsSUFBSSxnQkFDakNyQyxTQUFTTSxpQkFBaUIsVUFBV1YsS0FBSzRELGlCQUMxQzVELEtBQUsyRCxjQUFjakQsaUJBQWlCLFlBQWFWLEtBQUs4RCxrQkFDMUQsQ0FFQUMsS0FBQUEsR0FDSS9ELEtBQUsyRCxjQUFjNUMsVUFBVUcsT0FBTyxnQkFDcENkLFNBQVM2RCxvQkFBb0IsVUFBV2pFLEtBQUs0RCxpQkFDN0M1RCxLQUFLMkQsY0FBY00sb0JBQW9CLFlBQWFqRSxLQUFLOEQsa0JBQzdELENBRUFGLGVBQUFBLENBQWdCTSxHQUNNLFdBQWRBLEVBQU1DLEtBQ05uRSxLQUFLK0QsT0FFYixDQUVBRCxpQkFBQUEsQ0FBa0JJLEdBQ1ZBLEVBQU1FLFNBQVdGLEVBQU1HLGVBQ3ZCckUsS0FBSytELE9BRWIsQ0FFQU8saUJBQUFBLEdBQ0EsRUMvQmEsTUFBTUMsVUFBc0JkLEVBQ3ZDL0QsV0FBQUEsQ0FBV0MsR0FBb0MsSUFBbkMsY0FBQytELEVBQWEsaUJBQUVjLEdBQWlCN0UsRUFDekM4RSxNQUFNZixHQUNOMUQsS0FBSzBFLFdBQWExRSxLQUFLMkQsY0FBY3RELGNBQWMsZ0JBQ25ETCxLQUFLMkUsWUFBY0gsRUFDbkJ4RSxLQUFLc0UsbUJBQ1QsQ0FFQVAsS0FBQUEsR0FDSVUsTUFBTVYsT0FDVixDQUVBTyxpQkFBQUEsR0FDSU0sUUFBUUMsSUFBSTdFLEtBQUsyRSxhQUNqQjNFLEtBQUswRSxXQUFXaEUsaUJBQWlCLFNBQVVWLEtBQUsyRSxZQUNwRCxDQUVBRyxTQUFBQSxHQUNFLE1BQU1DLEVBQVMvRSxLQUFLMEUsV0FBV00sdUJBQXVCLGdCQUN0RCxJQUFJQyxFQUFPLEdBSVgsT0FIQW5ELE1BQU1DLEtBQUtnRCxHQUFRaEMsU0FBUW1DLElBQ3ZCRCxFQUFLRSxLQUFLRCxFQUFNRSxNQUFNLElBRW5CSCxDQUNYLEVDbkJLLE1BK0JReEQsRUFBVyxDQUN0QlEsY0FBZSxnQkFDZkUscUJBQXNCLGlCQUN0QmtCLG9CQUFxQix5QkFDckJYLGdCQUFpQiwwQkFDakJDLFdBQVksd0JDakNWMEMsRUFBVSxJQ1ZELE1BRWYzRixXQUFBQSxDQUFXQyxFQUFtQjJGLEdBQWUsSUFBakMsTUFBQ0MsRUFBSyxTQUFFQyxHQUFTN0YsRUFDekJLLEtBQUt5RixPQUFTRixFQUNkdkYsS0FBSzBGLFVBQVlGLEVBQ2pCeEYsS0FBSzJGLFdBQWF2RixTQUFTQyxjQUFjaUYsR0FDekN0RixLQUFLNEYsYUFDVCxDQUVBQSxXQUFBQSxHQUNJNUYsS0FBS3lGLE9BQU8xQyxTQUFTOEMsSUFDbkI3RixLQUFLOEYsUUFBUUQsRUFBSyxHQUV0QixDQUVBQyxPQUFBQSxDQUFRRCxHQUNOLE1BQU1FLEVBQVUvRixLQUFLMEYsVUFBVUcsR0FDL0I3RixLQUFLMkYsV0FBV0ssUUFBUUQsRUFDMUIsR0RSMkIsQ0FBQ1IsTURIRixDQUN4QixDQUNFekYsS0FBTSxrQkFDTkMsS0FBTSxzR0FFUixDQUNFRCxLQUFNLGNBQ05DLEtBQU0seUdBRVIsQ0FDRUQsS0FBTSxpQkFDTkMsS0FBTSw0R0FFUixDQUNFRCxLQUFNLFVBQ05DLEtBQU0scUdBRVIsQ0FDRUQsS0FBTSx3QkFDTkMsS0FBTSxxR0FFUixDQUNFRCxLQUFNLGlCQUNOQyxLQUFNLG1HQ3BCZ0R5RixTQUFVUyxHQUFVLG1CQUl4RUMsR0FIYTlGLFNBQ2hCQyxjQUFjLGtCQUNkQyxRQUFRRCxjQUFjLFNBQ0wsSUVkUCxNQUNYWCxXQUFBQSxDQUFXQyxHQUFjLElBQWIsS0FBQ0csRUFBSSxJQUFFcUcsR0FBSXhHLEVBQ25CSyxLQUFLb0csTUFBUXRHLEVBQ2JFLEtBQUtxRyxLQUFPRixDQUNoQixDQUVBRyxXQUFBQSxHQUNJLE1BQU8sQ0FBQ3hHLEtBQUtFLEtBQUtvRyxNQUFPRCxJQUFJbkcsS0FBS3FHLEtBQ3RDLENBRUFFLFdBQUFBLENBQVdDLEdBQWMsSUFBYixLQUFDMUcsRUFBSSxJQUFFcUcsR0FBSUssRUFDbkJ4RyxLQUFLb0csTUFBUXRHLEVBQ2JNLFNBQVNDLGNBQWMsbUJBQW1CaUIsWUFBY3RCLEtBQUtvRyxNQUM3RHBHLEtBQUtxRyxLQUFPRixFQUNaL0YsU0FBU0MsY0FBYyx5QkFBeUJpQixZQUFjdEIsS0FBS3FHLElBQ3ZFLEdGRCtCLG1CQUFvQixhQUUvQ0ksR0FEYXJHLFNBQVNDLGNBQWMsbUJBQ2pCRCxTQUFTQyxjQUFjLHlCQUMxQ3FHLEVBQWV0RyxTQUFTQyxjQUFjLG1CQUN0Q3NHLEVBQXFCdkcsU0FBU0MsY0FBYyx5QkFDNUN1RyxFQUFvQnhHLFNBQVNDLGNBQWMsaUJBQzNDd0csRUFBMEJ6RyxTQUFTQyxjQUFjLHVCQUNqRHlHLEVBQW9CMUcsU0FBU0MsY0FBYyx5QkFDM0MwRyxFQUFtQjNHLFNBQVNDLGNBQWMsaUJBQzFDMkcsRUFBVzVHLFNBQVNDLGNBQWMsYUFDcEM0RyxFQUFtQixJQUFJMUMsRUFBYyxDQUFDYixjQUFjLG9CQUFxQmMsaUJBNkIvRSxTQUFpQzBDLEdBQy9CQSxFQUFFQyxpQkFDRixJQUFJcEMsRUFBU2tDLEVBQWlCbkMsWUFDOUJvQixFQUFZSyxZQUFZLENBQUN6RyxLQUFLaUYsRUFBTyxHQUFJb0IsSUFBSXBCLEVBQVEsS0FDckRrQyxFQUFpQmxELE9BQ25CLElBakNNcUQsRUFBZSxJQUFJN0MsRUFBZSxDQUFDYixjQUFjLGFBQWNjLGlCQW1DckUsU0FBNkIwQyxHQUMzQkEsRUFBRUMsaUJBQ0YsSUFBSXBDLEVBQVNxQyxFQUFhdEMsYUFwQjVCLFNBQW9CdUMsRUFBVUMsR0FDNUIsTUFBTUMsRUFBY3RCLEVBQVFvQixHQUM1QmhDLEVBQVFTLFFBQVF5QixFQUNsQixFQWtCRUMsQ0FBVyxDQUFFMUgsS0FBTWlGLEVBQU8sR0FBSWhGLEtBQU1nRixFQUFPLEtBQzNDbUMsRUFBRTlDLE9BQU9xRCxRQUNUQyxFQUFxQjdFLGtCQUNyQnVFLEVBQWFyRCxPQUNmLElBekNNNEQsRUFBb0IsSUd4QlgsY0FBNkJsRSxFQUN4Qy9ELFdBQUFBLENBQVlnRSxHQUNSZSxNQUFNZixFQUNWLENBRUFNLElBQUFBLENBQUszQyxFQUFLdUcsR0FDTjVILEtBQUsyRCxjQUFjdEQsY0FBYyxpQkFBaUJnQixJQUFNQSxFQUN4RHJCLEtBQUsyRCxjQUFjdEQsY0FBYyxpQkFBaUJrQixJQUFNRixFQUN4RHJCLEtBQUsyRCxjQUFjdEQsY0FBYyxtQkFBbUJpQixZQUFjc0csRUFDbEVuRCxNQUFNVCxNQUNWLEdIY3lDLHNCQUN2QzBELEVBQXVCLElBQUlsRyxFQUFjcUcsRUFBb0JiLEdBQzdEYyxFQUF1QixJQUFJdEcsRUFBY3FHLEVBQW9CZCxHQVFuRSxTQUFTZCxFQUFRb0IsR0FFZixPQURhLElBQUk1SCxFQUFLNEgsRUFBVSxpQkFBa0J4SCxHQUN0Q3NCLFNBQ2QsQ0FTQSxTQUFTdEIsRUFBaUJrSSxHQUN4QkosRUFBa0IzRCxLQUFLK0QsRUFBYWhJLEtBQU1nSSxFQUFhakksS0FDekQsQ0FsQkE0SCxFQUFxQmxFLG1CQUVyQnNFLEVBQXFCdEUsbUJBb0NyQnNELEVBQWtCcEcsaUJBQWlCLFNBQVMsS0FDMUNrRyxFQUFrQnhCLE1BQVFzQixFQUFhcEYsWUFDdkN1RixFQUF3QnpCLE1BQVF1QixFQUFtQnJGLFlBQVkwRyxPQUMvRGYsRUFBaUJqRCxPQUNqQjhELEVBQXFCakYsaUJBQWlCLElBR3hDNEQsRUFBaUIvRixpQkFBaUIsU0FBUyxJQUFNMEcsRUFBYXBELFEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rIH0sIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIHRoaXMubGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICB9XHJcblxyXG4gIGdldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbigpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2lzLWFjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVEZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLmdldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLm5hbWU7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBzaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLmhpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy5faGFuZGxlTW9kYWxDbG9zZSA9IHRoaXMuX2hhbmRsZU1vZGFsQ2xvc2UuYmluZCh0aGlzKTtcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU1vZGFsQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU1vZGFsQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICB9XG5cbiAgX2hhbmRsZU1vZGFsQ2xvc2UoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC50YXJnZXQgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3Ioe3BvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXR9KSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybSA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycyAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuX2hhbmRsZUZvcm0pO1xuICAgICAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVGb3JtKTtcbiAgICB9XG5cbiAgICBnZXRJbnB1dHMoKSB7XG4gICAgICBjb25zdCBpbnB1dHMgPSB0aGlzLl9wb3B1cEZvcm0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm1vZGFsX19pbnB1dFwiKTtcbiAgICAgIGxldCB2YWxzID0gW107XG4gICAgICBBcnJheS5mcm9tKGlucHV0cykuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgdmFscy5wdXNoKGlucHV0LnZhbHVlKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHZhbHM7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcblxyXG4vLyBJbml0aWFsIGNhcmRzIGRhdGFcclxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICAgIH0sXHJcbiAgXTtcclxuXHJcbiAgLy8gRWxlbWVudHNcclxuXHJcblxyXG4gIC8vIEZvcm0gc2V0dGluZ3NcclxuICBleHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG4gIH07IiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgKiBhcyBjb25zdGFudHMgZnJvbSBcIi4uLy4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24gKHtpdGVtczpjb25zdGFudHMuaW5pdGlhbENhcmRzLCByZW5kZXJlcjogYWRkQ2FyZH0sIFwiLmdhbGxlcnlfX2NhcmRzXCIpO1xuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnRcbiAgICAucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpXG4gICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xuICBjb25zdCBwcm9maWxlSW5mbyA9IG5ldyBVc2VySW5mbyhcIkphY3F1ZXMgQ291c3RlYXVcIiwgXCJFeHBsb3JlclwiKTtcbiAgY29uc3QgY2FyZExpc3RFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fY2FyZHNcIik7XG4gIGNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX2FkZC1idXR0b25cIik7XG4gIGNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fdGl0bGVcIik7XG4gIGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG4gIGNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbF9fdGl0bGVcIik7XG4gIGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbF9fZGVzY3JpcHRpb25cIik7XG4gIGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbiAgY29uc3QgcHJvZmlsZU1vZGFsRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1mb3JtXCIpO1xuICBjb25zdCBjYXJkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWZvcm1cIik7XG5jb25zdCBwcm9maWxlRm9ybU1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oe3BvcHVwU2VsZWN0b3I6XCIjcHJvZmlsZUVkaXRNb2RhbFwiLCBoYW5kbGVGb3JtU3VibWl0OmhhbmRsZVByb2ZpbGVFZGl0U3VibWl0fSk7XG5jb25zdCBjYXJkQWRkTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybSAoe3BvcHVwU2VsZWN0b3I6XCIjY2FyZE1vZGFsXCIsIGhhbmRsZUZvcm1TdWJtaXQ6aGFuZGxlQWRkQ2FyZFN1Ym1pdH0pO1xuY29uc3QgcHJldmlld0ltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcHJldmlld0ltYWdlTW9kYWxcIik7XG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbnN0YW50cy5zZXR0aW5ncywgY2FyZEZvcm0pO1xuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25zdGFudHMuc2V0dGluZ3MsIHByb2ZpbGVNb2RhbEZvcm0pO1xuXG4vLyBFbmFibGUgZm9ybSB2YWxpZGF0aW9uXG5cbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxucHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5mdW5jdGlvbiBhZGRDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVJbWFnZUNsaWNrKTtcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xufVxuXG4vLyBSZW5kZXIgY2FyZCBmdW5jdGlvbiB1c2luZyBDYXJkIGNsYXNzXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhLCBjYXJkTGlzdEVsKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gYWRkQ2FyZChjYXJkRGF0YSk7XG4gIHNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XG59XG5cbi8vIEltYWdlIGNsaWNrIGhhbmRsZXJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soY2FyZEluc3RhbmNlKSB7XG4gIHByZXZpZXdJbWFnZVBvcHVwLm9wZW4oY2FyZEluc3RhbmNlLmxpbmssIGNhcmRJbnN0YW5jZS5uYW1lKTtcbn1cblxuLy9cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBsZXQgaW5wdXRzID0gcHJvZmlsZUZvcm1Nb2RhbC5nZXRJbnB1dHMoKTtcbiAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8oe25hbWU6aW5wdXRzWzBdLCBqb2I6aW5wdXRzIFsxXX0pO1xuICBwcm9maWxlRm9ybU1vZGFsLmNsb3NlKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRTdWJtaXQoZSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGxldCBpbnB1dHMgPSBjYXJkQWRkTW9kYWwuZ2V0SW5wdXRzKCk7XG4gIHJlbmRlckNhcmQoeyBuYW1lOiBpbnB1dHNbMF0sIGxpbms6IGlucHV0c1sxXSB9KTtcbiAgZS50YXJnZXQucmVzZXQoKTtcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGNhcmRBZGRNb2RhbC5jbG9zZSgpO1xufVxuXG4vLyBFdmVudCBMaXN0ZW5lcnNcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gcHJvZmlsZVRpdGxlLnRleHRDb250ZW50O1xuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudC50cmltKCk7XG4gIHByb2ZpbGVGb3JtTW9kYWwub3BlbigpO1xuICBwcm9maWxlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBjYXJkQWRkTW9kYWwub3BlbigpKTtcblxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcblxuY29uc3RydWN0b3Ioe2l0ZW1zLCByZW5kZXJlcn0sY2xhc3NTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNsYXNzU2VsZWN0b3IpO1xuICAgIHRoaXMucmVuZGVySXRlbXMoKTtcbn1cblxucmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5hZGRJdGVtKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShpdGVtKSB7XG4gICAgY29uc3QgbmV3Q2FyZCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKG5ld0NhcmQpO1xuICB9XG59XG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHtuYW1lLCBqb2J9KSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fam9iID0gam9iO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiB7bmFtZTp0aGlzLl9uYW1lLCBqb2I6dGhpcy5fam9ifTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyh7bmFtZSwgam9ifSkge1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgICAgIHRoaXMuX2pvYiA9IGpvYjtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpLnRleHRDb250ZW50ID0gdGhpcy5fam9iO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgb3BlbihzcmMsIGRhdGEpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpLnNyYyA9IHNyYztcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpLmFsdCA9IHNyYztcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIikudGV4dENvbnRlbnQgPSBkYXRhO1xuICAgICAgICBzdXBlci5vcGVuKCk7XG4gICAgfVxufSJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIm5hbWUiLCJsaW5rIiwidGhpcyIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsImdldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlSWNvbiIsIl9kZWxldGVCdXR0b24iLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9jYXJkSW1hZ2VFbGVtZW50IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwiZ2V0VmlldyIsIl9jYXJkVGl0bGVFbGVtZW50Iiwic3JjIiwidGV4dENvbnRlbnQiLCJhbHQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9zZXR0aW5ncyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiYWRkIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImhpZGVJbnB1dEVycm9yIiwicmVzZXRWYWxpZGF0aW9uIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiaGFzSW52YWxpZElucHV0IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwic29tZSIsImVuYWJsZVZhbGlkYXRpb24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9oYW5kbGVNb2RhbENsb3NlIiwiY2xvc2UiLCJvcGVuIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwia2V5IiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybSIsImNvbnNvbGUiLCJsb2ciLCJnZXRJbnB1dHMiLCJpbnB1dHMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwidmFscyIsImlucHV0IiwicHVzaCIsInZhbHVlIiwic2VjdGlvbiIsImNsYXNzU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJuZXdDYXJkIiwicHJlcGVuZCIsImFkZENhcmQiLCJwcm9maWxlSW5mbyIsImpvYiIsIl9uYW1lIiwiX2pvYiIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJfcmVmMiIsImFkZE5ld0NhcmRCdXR0b24iLCJwcm9maWxlVGl0bGUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlTW9kYWxGb3JtIiwiY2FyZEZvcm0iLCJwcm9maWxlRm9ybU1vZGFsIiwiZSIsInByZXZlbnREZWZhdWx0IiwiY2FyZEFkZE1vZGFsIiwiY2FyZERhdGEiLCJjYXJkTGlzdEVsIiwiY2FyZEVsZW1lbnQiLCJyZW5kZXJDYXJkIiwicmVzZXQiLCJhZGRDYXJkRm9ybVZhbGlkYXRvciIsInByZXZpZXdJbWFnZVBvcHVwIiwiZGF0YSIsImNvbnN0YW50cyIsInByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiY2FyZEluc3RhbmNlIiwidHJpbSJdLCJzb3VyY2VSb290IjoiIn0=