!function(){"use strict";class e{constructor(e,t,n){let{name:s,link:o}=e;this.name=s,this.link=o,this._cardSelector=t,this._handleImageClick=n}getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick(this)}))}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button_is-active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=this.getTemplate(),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._cardTitleElement=this._cardElement.querySelector(".card__title"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._cardImageElement.src=this.link,this._cardTitleElement.textContent=this.name,this._cardImageElement.alt=this.name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._settings=e,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._buttonElement=this._formElement.querySelector(this._settings.submitButtonSelector)}showInputError(e,t){const n=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._settings.inputErrorClass),n.textContent=t,n.classList.add(this._settings.errorClass)}hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass),t.textContent=""}resetValidation(){this.toggleButtonState(),this._inputList.forEach((e=>{this.hideInputError(e)}))}checkInputValidity(e){e.validity.valid?this.hideInputError(e):this.showInputError(e,e.validationMessage)}toggleButtonState(){this.hasInvalidInput()?(this._buttonElement.classList.add(this._settings.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._settings.inactiveButtonClass),this._buttonElement.disabled=!1)}hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_setEventListeners(){this.toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this.checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._setEventListeners()}}class n{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._handleModalClose=this._handleModalClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("mousedown",this._handleModalClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("mousedown",this._handleModalClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleModalClose(e){e.target===e.currentTarget&&this.close()}setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>this.close()))}}class s extends n{constructor(e){let{popupSelector:t,handleFormSubmit:n}=e;super(t),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleForm=n}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleForm(e,this._getInputValues())}))}_getInputValues(){const e=this._popupForm.getElementsByClassName("modal__input"),t={};return Array.from(e).forEach((e=>{t[e.name]=e.value})),t}}const o={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},r=new class{constructor(e,t){let{items:n,renderer:s}=e;this._items=n,this._renderer=s,this._container=document.querySelector(t),this.renderItems()}renderItems(){this._items.forEach((e=>{this.addItem(e)}))}addItem(e){const t=this._renderer(e);this._container.prepend(t)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:function(t){return new e(t,"#card-template",S).getView()}},".gallery__cards"),i=(document.querySelector("#card-template").content.querySelector(".card"),new class{constructor(e){let{nameSelector:t,jobSelector:n}=e;this._nameSelector=t,this._jobSelector=n,this._nameElement=document.querySelector(this._nameSelector),this._jobElement=document.querySelector(this._jobSelector)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e){let{name:t,job:n}=e;this._name=t,this._nameElement.textContent=this._name,this._job=n,this._jobElement.textContent=this._job}}({nameSelector:"#profile__title",jobSelector:"#profile__description"})),l=(document.querySelector(".gallery__cards"),document.querySelector("#profile__add-button")),a=(document.querySelector("#profile__title"),document.querySelector("#profile__description"),document.querySelector("#modal__title")),c=document.querySelector("#modal__description"),d=document.querySelector("#profile__edit-button"),m=document.querySelector("#profile-form"),u=document.querySelector("#add-form"),h=new s({popupSelector:"#profileEditModal",handleFormSubmit:function(e,t){i.setUserInfo({name:t.title,job:t.description}),h.close()}});h.setEventListeners();const _=new s({popupSelector:"#cardModal",handleFormSubmit:function(e,t){var n;n={name:t.title,link:t.description},r.addItem(n),e.target.reset(),E.toggleButtonState(),_.close()}});_.setEventListeners();const p=new class extends n{constructor(e){super(e)}open(e,t){this._popupElement.querySelector(".modal__image").src=e,this._popupElement.querySelector(".modal__image").alt=e,this._popupElement.querySelector(".modal__caption").textContent=t,super.open()}}("#previewImageModal");p.setEventListeners();const E=new t(o,u),g=new t(o,m);function S(e){p.open(e.link,e.name)}new class{constructor(e,t){this._key=e,this._url=t}test(){fetch(url,{headers:{authorization:key}}).then((e=>e.json())).then((e=>{console.log(e)}))}}("c56e30dc-2883-4270-a59e-b2f7bae969c6","https://around-api.en.tripleten-services.com/v1/cards"),E.enableValidation(),g.enableValidation(),d.addEventListener("click",(()=>{a.value=i.getUserInfo().name,c.value=i.getUserInfo().job.trim(),h.open(),g.resetValidation()})),l.addEventListener("click",(()=>_.open()))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxNQUNiSixXQUFBQSxDQUFZeUUsRUFBSzBELEdBQ2Y3SCxLQUFLOEgsS0FBTzNELEVBQ1puRSxLQUFLK0gsS0FBT0YsQ0FDZCxDQUVBRyxJQUFBQSxHQUNFQyxNQUFNSixJQUFLLENBQ1RLLFFBQVMsQ0FDUEMsY0FBZWhFLE9BR2hCaUUsTUFBS0MsR0FBT0EsRUFBSUMsU0FDaEJGLE1BQU1HLElBQ0xDLFFBQVFDLElBQUlGLEVBQU8sR0FFekIsR0pzQmtCLHVDQUF3Qyx5REFJNURoQixFQUFxQi9ELG1CQUVyQm1FLEVBQXFCbkUsbUJBK0JyQnlELEVBQWtCdkcsaUJBQWlCLFNBQVMsS0FDMUNxRyxFQUFrQjVCLE1BQVFjLEVBQVlPLGNBQWMxRyxLQUNwRGtILEVBQXdCN0IsTUFBUWMsRUFBWU8sY0FBY0MsSUFBSWlDLE9BQzlEdEIsRUFBaUJyRCxPQUNqQjRELEVBQXFCOUUsaUJBQWlCLElBR3hDaUUsRUFBaUJwRyxpQkFBaUIsU0FBUyxJQUFNMkcsRUFBYXRELFEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FQSS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5saW5rID0gbGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2VJY29uKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25faXMtYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMubGluaztcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMubmFtZTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHNob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBoaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmhpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLmhhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLmNoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgICB0aGlzLl9oYW5kbGVNb2RhbENsb3NlID0gdGhpcy5faGFuZGxlTW9kYWxDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlTW9kYWxDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlTW9kYWxDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gIH1cblxuICBfaGFuZGxlTW9kYWxDbG9zZShldmVudCkge1xuICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3Ioe3BvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXR9KSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybSA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMgKCkge1xuICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybShlLCB0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAgIGNvbnN0IGlucHV0cyA9IHRoaXMuX3BvcHVwRm9ybS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibW9kYWxfX2lucHV0XCIpO1xuICAgICAgY29uc3QgdmFscyA9IHt9O1xuICAgICAgQXJyYXkuZnJvbShpbnB1dHMpLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgICAgIHZhbHNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHZhbHM7XG4gIH1cbn1cbiIsIi8vIEluaXRpYWwgY2FyZHMgZGF0YVxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAgICB7XG4gICAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxuICAgIH0sXG4gIF07XG5cbiAgLy8gRWxlbWVudHNcblxuXG4gIC8vIEZvcm0gc2V0dGluZ3NcbiAgZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICAgIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gICAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxuICB9OyIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0ICogYXMgY29uc3RhbnRzIGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQVBJLmpzXCJcblxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uICh7aXRlbXM6Y29uc3RhbnRzLmluaXRpYWxDYXJkcywgcmVuZGVyZXI6IGFkZENhcmR9LCBcIi5nYWxsZXJ5X19jYXJkc1wiKTtcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKVxuICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcblxuICBjb25zdCBwcm9maWxlSW5mbyA9IG5ldyBVc2VySW5mbyh7bmFtZVNlbGVjdG9yOiBcIiNwcm9maWxlX190aXRsZVwiLCBqb2JTZWxlY3RvcjogXCIjcHJvZmlsZV9fZGVzY3JpcHRpb25cIn0pO1xuXG4gIGNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2NhcmRzXCIpO1xuICBjb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuICBjb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX3RpdGxlXCIpO1xuICBjb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuICBjb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWxfX3RpdGxlXCIpO1xuICBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWxfX2Rlc2NyaXB0aW9uXCIpO1xuICBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG4gIGNvbnN0IHByb2ZpbGVNb2RhbEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZm9ybVwiKTtcbiAgY29uc3QgY2FyZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1mb3JtXCIpO1xuXG5jb25zdCBwcm9maWxlRm9ybU1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oe3BvcHVwU2VsZWN0b3I6XCIjcHJvZmlsZUVkaXRNb2RhbFwiLCBoYW5kbGVGb3JtU3VibWl0OmhhbmRsZVByb2ZpbGVFZGl0U3VibWl0fSk7XG5wcm9maWxlRm9ybU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGNhcmRBZGRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtICh7cG9wdXBTZWxlY3RvcjpcIiNjYXJkTW9kYWxcIiwgaGFuZGxlRm9ybVN1Ym1pdDpoYW5kbGVBZGRDYXJkU3VibWl0fSk7XG5jYXJkQWRkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcHJldmlld0ltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcHJldmlld0ltYWdlTW9kYWxcIik7XG5wcmV2aWV3SW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbnN0YW50cy5zZXR0aW5ncywgY2FyZEZvcm0pO1xuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25zdGFudHMuc2V0dGluZ3MsIHByb2ZpbGVNb2RhbEZvcm0pO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKFwiYzU2ZTMwZGMtMjg4My00MjcwLWE1OWUtYjJmN2JhZTk2OWM2XCIsIFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvY2FyZHNcIik7XG5cbi8vIEVuYWJsZSBmb3JtIHZhbGlkYXRpb25cblxuYWRkQ2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmZ1bmN0aW9uIGFkZENhcmQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmREYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2spO1xuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XG59XG5cbi8vIFJlbmRlciBjYXJkIGZ1bmN0aW9uIHVzaW5nIENhcmQgY2xhc3NcbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEsIGNhcmRMaXN0RWwpIHtcbiAgc2VjdGlvbi5hZGRJdGVtKGNhcmREYXRhKTtcbn1cblxuLy8gSW1hZ2UgY2xpY2sgaGFuZGxlclxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhjYXJkSW5zdGFuY2UpIHtcbiAgcHJldmlld0ltYWdlUG9wdXAub3BlbihjYXJkSW5zdGFuY2UubGluaywgY2FyZEluc3RhbmNlLm5hbWUpO1xufVxuXG4vL1xuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQoZSwgaW5wdXRzKSB7XG4gIHByb2ZpbGVJbmZvLnNldFVzZXJJbmZvKHtuYW1lOmlucHV0c1tcInRpdGxlXCJdLCBqb2I6aW5wdXRzIFtcImRlc2NyaXB0aW9uXCJdfSk7XG4gIHByb2ZpbGVGb3JtTW9kYWwuY2xvc2UoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChlLCBpbnB1dHMpIHtcbiAgcmVuZGVyQ2FyZCh7IG5hbWU6IGlucHV0c1tcInRpdGxlXCJdLCBsaW5rOiBpbnB1dHNbXCJkZXNjcmlwdGlvblwiXSB9KTtcbiAgZS50YXJnZXQucmVzZXQoKTtcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgY2FyZEFkZE1vZGFsLmNsb3NlKCk7XG59XG5cbi8vIEV2ZW50IExpc3RlbmVyc1xucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBwcm9maWxlSW5mby5nZXRVc2VySW5mbygpLm5hbWU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZUluZm8uZ2V0VXNlckluZm8oKS5qb2IudHJpbSgpO1xuICBwcm9maWxlRm9ybU1vZGFsLm9wZW4oKTtcbiAgcHJvZmlsZUZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcblxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2FyZEFkZE1vZGFsLm9wZW4oKSk7XG5cbi8vYXBpLnRlc3QoKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuXG5jb25zdHJ1Y3Rvcih7aXRlbXMsIHJlbmRlcmVyfSxjbGFzc1NlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NTZWxlY3Rvcik7XG4gICAgdGhpcy5yZW5kZXJJdGVtcygpO1xufVxuXG5yZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLmFkZEl0ZW0oaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGl0ZW0pIHtcbiAgICBjb25zdCBuZXdDYXJkID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQobmV3Q2FyZCk7XG4gIH1cbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yKHtuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yfSkge1xuICAgICAgICB0aGlzLl9uYW1lU2VsZWN0b3IgPSBuYW1lU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2pvYlNlbGVjdG9yID0gam9iU2VsZWN0b3I7XG5cbiAgICAgICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX25hbWVTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2pvYlNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgICAgICBqb2I6IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnRcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldFVzZXJJbmZvKHtuYW1lLCBqb2J9KSB7XG4gICAgICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgICAgIHRoaXMuX2pvYiA9IGpvYjtcbiAgICAgICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX2pvYjtcbiAgICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgb3BlbihzcmMsIGRhdGEpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpLnNyYyA9IHNyYztcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpLmFsdCA9IHNyYztcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIikudGV4dENvbnRlbnQgPSBkYXRhO1xuICAgICAgICBzdXBlci5vcGVuKCk7XG4gICAgfVxufSIsIi8vIGI3M2E0NjM4LWViN2EtNDE5Yy04YjM0LWYzNGY0ZDc3MGIwNSBhdXRoIHRva2VuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKGtleSwgdXJsKSB7XG4gICAgdGhpcy5fa2V5ID0ga2V5O1xuICAgIHRoaXMuX3VybCA9IHVybDtcbiAgfVxuXG4gIHRlc3QoKSB7XG4gICAgZmV0Y2godXJsLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IGtleVxuICAgICAgfVxuICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgIH0pO1xuICB9XG59Il0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwibmFtZSIsImxpbmsiLCJ0aGlzIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2RlbGV0ZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX2NhcmRJbWFnZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJnZXRWaWV3IiwiX2NhcmRUaXRsZUVsZW1lbnQiLCJzcmMiLCJ0ZXh0Q29udGVudCIsImFsdCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX3NldHRpbmdzIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsInNob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaGlkZUlucHV0RXJyb3IiLCJyZXNldFZhbGlkYXRpb24iLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJjaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJoYXNJbnZhbGlkSW5wdXQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJzb21lIiwiZW5hYmxlVmFsaWRhdGlvbiIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX2hhbmRsZU1vZGFsQ2xvc2UiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJrZXkiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtIiwiZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRzIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInZhbHMiLCJpbnB1dCIsInZhbHVlIiwic2VjdGlvbiIsImNsYXNzU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJuZXdDYXJkIiwicHJlcGVuZCIsImNhcmREYXRhIiwicHJvZmlsZUluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lU2VsZWN0b3IiLCJfam9iU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsImdldFVzZXJJbmZvIiwiam9iIiwic2V0VXNlckluZm8iLCJfcmVmMiIsIl9uYW1lIiwiX2pvYiIsImFkZE5ld0NhcmRCdXR0b24iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlTW9kYWxGb3JtIiwiY2FyZEZvcm0iLCJwcm9maWxlRm9ybU1vZGFsIiwiY2FyZEFkZE1vZGFsIiwicmVzZXQiLCJhZGRDYXJkRm9ybVZhbGlkYXRvciIsInByZXZpZXdJbWFnZVBvcHVwIiwiZGF0YSIsImNvbnN0YW50cyIsInByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiY2FyZEluc3RhbmNlIiwidXJsIiwiX2tleSIsIl91cmwiLCJ0ZXN0IiwiZmV0Y2giLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInRoZW4iLCJyZXMiLCJqc29uIiwicmVzdWx0IiwiY29uc29sZSIsImxvZyIsInRyaW0iXSwic291cmNlUm9vdCI6IiJ9